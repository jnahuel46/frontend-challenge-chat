@use '../../../styles/variables' as *;

.messageBubble {
  display: flex;
  gap: var(--spacing-md);

  &.user {
    flex-direction: row-reverse;
  }

  &.ai {
    flex-direction: row;
  }

  .content {
    display: flex;
    flex-direction: column;
    max-width: 20rem;

    @media (min-width: 640px) {
      max-width: 28rem;
    }

    @media (min-width: 1024px) {
      max-width: 32rem;
    }

    &.userContent {
      align-items: flex-end;
    }

    &.aiContent {
      align-items: flex-start;
    }

    .bubble {
      padding: var(--spacing-md);
      border-radius: var(--spacing-lg);
      transition: all var(--transition-fast);

      &.userBubble {
        background-color: var(--primary);
        color: white;
        border-bottom-right-radius: var(--spacing-sm);
      }

      &.aiBubble {
        background-color: var(--bg-secondary);
        color: var(--text-primary);
        border: 1px solid var(--border-color);
        border-bottom-left-radius: var(--spacing-sm);
      }

      &.streaming {
        animation: pulse 2s infinite;
      }

      .text {
        font-size: var(--text-sm);
        line-height: 1.6;
        word-break: break-words;
      }

      .streamingDots {
        display: flex;
        align-items: center;
        margin-top: var(--spacing-sm);
        gap: var(--spacing-xs);

        .streamingDot {
          width: 0.25rem;
          height: 0.25rem;
          background-color: currentColor;
          border-radius: var(--radius-full);
          animation: typing 1.5s infinite;

          &:nth-child(2) {
            animation-delay: 0.2s;
          }

          &:nth-child(3) {
            animation-delay: 0.4s;
          }
        }
      }
    }

    .metadata {
      display: flex;
      align-items: center;
      margin-top: var(--spacing-xs);
      gap: var(--spacing-sm);

      &.userMeta {
        flex-direction: row-reverse;
      }

      &.aiMeta {
        flex-direction: row;
      }

      .timestamp {
        font-size: var(--text-xs);
        color: var(--text-secondary);
      }
    }
  }
}