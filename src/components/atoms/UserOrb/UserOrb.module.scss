@use '../../../styles/variables' as *;
@use '../../../styles/design-tokens' as *;

.orbContainer {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease-in-out;

  &.normal {
    width: $size-orb-normal;
    height: $size-orb-normal;
  }

  &.large {
    width: $size-orb-large;
    height: $size-orb-large;
  }

  &.speaking {
    transform: scale($scale-speaking); // From 86px to 96px = 1.12 scale
    animation: userSpeakingPulse $duration-speaking ease-in-out infinite;
  }
}

.orb {
  width: 100%;
  height: 100%;
  transition: all 0.3s ease-in-out;
  filter: drop-shadow($shadow-glow-small $color-user-orb-primary);
  animation: userOrbGlow $duration-breathing ease-in-out infinite;

  .speaking & {
    filter: drop-shadow($shadow-glow-large $color-user-orb-speaking);
    animation: userSpeakingPulse $duration-speaking ease-in-out infinite;
  }
}

// Normal breathing animation with rotation (like Iris)
@keyframes userOrbGlow {
  0%, 100% {
    transform: scale(1) rotate(0deg);
    filter: drop-shadow($shadow-glow-small $color-user-orb-primary);
  }
  50% {
    transform: scale($scale-orb-breathing) rotate(30deg);
    filter: drop-shadow($shadow-glow-medium $color-user-orb-glow);
  }
}

// Speaking animation (more intense, no rotation for clarity)
@keyframes userSpeakingPulse {
  0%, 100% {
    transform: scale(1);
    filter: drop-shadow($shadow-glow-small $color-user-orb-primary);
  }
  50% {
    transform: scale($scale-hover);
    filter: drop-shadow($shadow-glow-intense $color-user-orb-intense);
  }
}